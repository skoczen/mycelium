{% extends "people/base.html" %}
{% load i18n generic_fields %}
{% block head %}{{block.super}}
<script type="text/javascript" charset="utf-8">
	$(function(){
		$(".striped tr:even").addClass("even");
		$(".striped tr:odd").addClass("odd");
		$(".save_info a").hide();

		$(".switch").click(toggle_edit);
		$("body").bind('keydown', 'ctrl+e', toggle_edit);
		$("body").bind('keydown', 'alt+e', toggle_edit);
		$("body").bind('keydown', 'meta+e', toggle_edit);
		$("body").bind('keydown', 'ctrl+f', focus_search);

		// $("input").autoGrowInput({comfortZone: 30,});
		// $("input").check_width();
		$("form input").live("change", save_basic_form)
		
	})
	function toggle_edit(){
		var box = $(".switch_box",this);
		if (box.hasClass("off")) {
			box.removeClass("off").addClass("on");
			$(".basic_info.view").hide();
			$(".basic_info.edit").show();
			$(".save_info a").show();
			$("#basic_info_form").removeClass("edit_mode_off").addClass("edit_mode_on");
		} else {
			box.removeClass("on").addClass("off");
			$(".basic_info.view").show();
			$(".basic_info.edit").hide();
			$(".save_info a").hide();
			$("#basic_info_form").addClass("edit_mode_off").removeClass("edit_mode_on");
		}
	}
	function focus_search(){
		$("#id_page_top_search").focus();
	}
	function save_basic_form() {
		$.ajax({
		  url: $("#basic_info_form").attr("action"),
		  type: "POST",
		  dataType: "json",
		  data: $.param( $("#basic_info_form input") ),
			  success: function(json) {
				alert("success:" + json.success);
			 },
		
			  error: function() {
				alert("error");
			  },
		});
	}
</script>
{% generic_field_head %}
{% endblock %}
{% block page_content %}
<div id="detail_header">
	{# <a href="#" class="mycelium_btn">All People</a> #}
	<div class="switch">
		<div class="left_label">Edit</div>
		<div class="switch_box off">
		<div class="left_switch">on</div>
		<div class="right_switch">off</div>
		</div>
		<div class="right_label"></div>
	</div>
	{# <div class="save_info"> #}
	{# 	Last saved 4 days ago. #}
	{# 	<a href="#" class="mycelium_btn myelium_gray">Saved</a> #}
	{# </div> #}
	<div class="small_search">
		<input id="id_page_top_search" name="page_top_search" />
	</div>
</div>


<form action="{% url people:person_save_basic person.pk %}" class="edit_mode_off" id="basic_info_form" method="POST">
<div class="basic_info">
	<div class="address">
		{% generic_editable_field address_form.line_1 %}
		{% generic_editable_field address_form.line_2 %}

		<div class="city_state_zip">
			{% generic_editable_field address_form.city %}
			{% generic_editable_field address_form.state %},
			{% generic_editable_field address_form.postal_code %}
		</div>
	
	</div>
	<div class="name_phone_email">
		<div class="name">
			{% generic_editable_field form.first_name %}
			{% generic_editable_field form.last_name %}
		</div>
		{% generic_editable_field phone_form.phone_number %}
		{% generic_editable_field email_form.email %}
	</div>
</div>
</form>

{# {% include "people/_basic_view.html" %} #}
{# {% include "people/_basic_edit.html" %} #}

<div class="additional_information">
	{# Extra emails, phone #s, Addresses #}
</div>
	
	
<div id="detail_tabs">
	<a class="detail_tab" href="#">Conversations</a>
	<a class="detail_tab" href="#">Participant</a>
	<a class="detail_tab current" href="#">Volunteer</a>
	<a class="detail_tab" href="#">Donor</a>
</div>
<div id="detail_tab_contents">
	<div class="detail_header">Recent Volunteer Activity</div>
	{# add btn #}
	<table class="volunteer_shift_table striped">
		<tr>
			<td>3 hours</td>
			<td>last wednesday</td>
			<td>on Office Shift</td>
		</tr>
		<tr>
			<td>2 hours</td>
			<td>Nov 26</td>
			<td>on Tabling</td>
		</tr>
		<tr>
			<td>6 hours</td>
			<td>Nov 14</td>
			<td>on Training</td>
		</tr>
	</table>
	<div class="detail_header">All Volunteer Activity</div>
	{# add btn #}
	<table class="volunteer_shift_table striped">
		<tr>
			<td>2010</td>
			<td>83 hours</td>
			<td><a href="#">See details</a></td>
		</tr>
		<tr>
			<td>2009</td>
			<td>136 hours</td>
			<td><a href="#">See details</a></td>
		</tr>
		<tr>
			<td>2008</td>
			<td>42 hours</td>
			<td><a href="#">See details</a></td>
		</tr>
		
	</table>	
</div>
{% endblock %}