{% extends "people/base.html" %}
{% block head %}{{block.super}}
<script type="text/javascript" charset="utf-8">
$(function(){
	$(".result_row:even").addClass("even");
	$(".result_row:odd").addClass("odd");
	$('#id_search_query').toggleVal({populateFrom:"custom", text:"Search for a name, phone number, or email"}).addClass("prefilled");
	$("#id_search_query").live("keypress",update_search);
});
var q;
function update_search() {
	q = $("#id_search_query").val();
	$.ajax({
	  url: "{% url people:search_results %}",
	  type: "GET",
	  dataType: "json",
	  data: {'q':q},
	  success: function(json) {
		$(".search_results").html(json.html);
		$(".search_results .name a").each(function(){
			$(this).html($(this).text().replace(new RegExp(q, "gi"),'<b>'+q+'</b>'));
		});
	 },
	});
}
</script>
{% endblock %}
{% block page_content %}
<div class="main_search_box">
	<input name="search_query" id="id_search_query" />
</div>
<div class="search_results">
	{% include "people/_search_results.html" %}
</div>
{% endblock %}